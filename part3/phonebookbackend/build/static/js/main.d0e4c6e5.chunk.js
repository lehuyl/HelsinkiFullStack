(window.webpackJsonppart2=window.webpackJsonppart2||[]).push([[0],{14:function(e,n,t){e.exports=t(37)},36:function(e,n,t){},37:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),u=t(13),o=t.n(u),c=t(3),l=t(2),i=t.n(l),m="/api/persons",f=function(){return i.a.get(m)},d=function(e){return i.a.post(m,e)},s=function(e){return i.a.delete("".concat(m,"/").concat(e))},v=function(e,n){return i.a.put("".concat(m,"/").concat(e),n)},b=(t(36),function(e){var n=e.message;return null===n?null:r.a.createElement("div",{className:"error"},n)});function h(e,n){return""===n?e:e.filter(function(e){return e.name.toLowerCase().includes(n.toLowerCase())})}var p=function(e){var n=e.person,t=e.deleteButton;return r.a.createElement("div",null,n.name," ",n.number,r.a.createElement("button",{onClick:t},"delete"))},E=function(e){return r.a.createElement("form",null,r.a.createElement("div",null,"filter shown with ",r.a.createElement("input",{value:e.search,onChange:e.onChange})))};var g=function(e){return r.a.createElement("form",{onSubmit:e.onSubmit},r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:e.valueName,onChange:e.onChangeName})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{value:e.valueNumber,onChange:e.onChangeNumber})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},w=function(){var e=Object(a.useState)([]),n=Object(c.a)(e,2),t=n[0],u=n[1],o=Object(a.useState)(""),l=Object(c.a)(o,2),i=l[0],m=l[1],w=Object(a.useState)(""),C=Object(c.a)(w,2),j=C[0],O=C[1],N=Object(a.useState)(""),S=Object(c.a)(N,2),k=S[0],y=S[1],B=Object(a.useState)("Error..."),D=Object(c.a)(B,2),I=D[0],J=D[1];Object(a.useEffect)(function(){f().then(function(e){J(null),u(e.data)}).catch(function(e){J("can't get list of persons"),u([])})},[]);var L=function(e,n){return e.find(function(e){return e.name===n}).id};return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(b,{message:I}),r.a.createElement(E,{value:k,onChange:function(e){y(e.target.value)}}),r.a.createElement("h3",null,"add a new"),r.a.createElement(g,{valueName:i,onChangeName:function(e){m(e.target.value)},valueNumber:j,onChangeNumber:function(e){O(e.target.value)},onSubmit:function(e){e.preventDefault();var n={name:i,number:j};if(function(e,n){for(var t=new Map,a=0;a<e.length;a++)t.set(e[a].name,1);return!!t.has(n)}(t,i)){if(window.confirm("".concat(i," is already added to phonebook, replace the old number with a new one?"))){var a=L(t,i);v(a,n).then(function(e){J(null);var n=L(t,i);u(t.map(function(t){return t.id!==n?t:e.data})),m(""),O("")}).catch(function(e){J("Information of ".concat(i," has already been removed from server")),setTimeout(function(){J(null)},5e3),u(t),m(""),O("")})}}else d(n).then(function(e){J(null),u(t.concat(e.data)),m(""),O(""),J("Added ".concat(n.name)),setTimeout(function(){J(null)},5e3)}).catch(function(e){J("Error adding person"),u(t),m(""),O("")})}}),r.a.createElement("h3",null,"Numbers"),h(t,k).map(function(e){return r.a.createElement(p,{key:e.name,person:e,deleteButton:function(){return n=e.id,a=e.name,void(window.confirm("Delete ".concat(a," ?"))&&s(n).then(function(e){J(null),u(t.filter(function(e){return e.id!==n}))}).catch(function(e){J("Unable to delete person"),u(t.filter(function(e){return e.id!==n}))}));var n,a}})}))};o.a.render(r.a.createElement(w,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.d0e4c6e5.chunk.js.map